import{Dt as e,Nt as t,Ot as n,ct as r,mt as i,rt as a,vt as o,xt as s}from"./index-C57e6Qxc.js";import{t as c}from"./shim-p0Aa651k.js";var l=t(n(),1),u=t(s(),1);function d(e,t=[]){let n=[];function r(t,r){let i=l.createContext(r);i.displayName=t+`Context`;let a=n.length;n=[...n,r];let o=t=>{let{scope:n,children:r,...o}=t,s=n?.[e]?.[a]||i,c=l.useMemo(()=>o,Object.values(o));return(0,u.jsx)(s.Provider,{value:c,children:r})};o.displayName=t+`Provider`;function s(n,o){let s=o?.[e]?.[a]||i,c=l.useContext(s);if(c)return c;if(r!==void 0)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}return[o,s]}let i=()=>{let t=n.map(e=>l.createContext(e));return function(n){let r=n?.[e]||t;return l.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return i.scopeName=e,[r,f(i,...t)]}function f(...e){let t=e[0];if(e.length===1)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}e();var p=[`a`,`button`,`div`,`form`,`h2`,`h3`,`img`,`input`,`label`,`li`,`nav`,`ol`,`p`,`select`,`span`,`svg`,`ul`].reduce((e,t)=>{let n=o(`Primitive.${t}`),r=l.forwardRef((e,r)=>{let{asChild:i,...a}=e,o=i?n:t;return typeof window<`u`&&(window[Symbol.for(`radix-ui`)]=!0),(0,u.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),m=t(c(),1);function h(){return(0,m.useSyncExternalStore)(g,()=>!0,()=>!1)}function g(){return()=>{}}var _=`Avatar`,[v,y]=d(_),[b,x]=v(_),S=l.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,a]=l.useState(`idle`);return(0,u.jsx)(b,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:(0,u.jsx)(p.span,{...r,ref:t})})});S.displayName=_;var C=`AvatarImage`,w=l.forwardRef((e,t)=>{let{__scopeAvatar:n,src:i,onLoadingStatusChange:o=()=>{},...s}=e,c=x(C,n),l=O(i,s),d=a(e=>{o(e),c.onImageLoadingStatusChange(e)});return r(()=>{l!==`idle`&&d(l)},[l,d]),l===`loaded`?(0,u.jsx)(p.img,{...s,ref:t,src:i}):null});w.displayName=C;var T=`AvatarFallback`,E=l.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,a=x(T,n),[o,s]=l.useState(r===void 0);return l.useEffect(()=>{if(r!==void 0){let e=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&a.imageLoadingStatus!==`loaded`?(0,u.jsx)(p.span,{...i,ref:t}):null});E.displayName=T;function D(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function O(e,{referrerPolicy:t,crossOrigin:n}){let i=h(),a=l.useRef(null),o=(()=>i?(a.current||=new window.Image,a.current):null)(),[s,c]=l.useState(()=>D(o,e));return r(()=>{c(D(o,e))},[o,e]),r(()=>{let e=e=>()=>{c(e)};if(!o)return;let r=e(`loaded`),i=e(`error`);return o.addEventListener(`load`,r),o.addEventListener(`error`,i),t&&(o.referrerPolicy=t),typeof n==`string`&&(o.crossOrigin=n),()=>{o.removeEventListener(`load`,r),o.removeEventListener(`error`,i)}},[o,n,t]),s}var k=S,A=w,j=E;function M({className:e,...t}){return(0,u.jsx)(k,{"data-slot":`avatar`,className:i(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,e),...t})}function N({className:e,...t}){return(0,u.jsx)(A,{"data-slot":`avatar-image`,className:i(`aspect-square size-full`,e),...t})}function P({className:e,...t}){return(0,u.jsx)(j,{"data-slot":`avatar-fallback`,className:i(`bg-muted flex size-full items-center justify-center rounded-full`,e),...t})}export{P as n,N as r,M as t};